(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7001)}])},7001:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return E}});var l=t(5893),r=t(7294),n=t(9473),i=t(6319),s=t(6154);let d=s.Z.create({baseURL:"http://116.202.172.229:8443/api/v1/"}),c=(0,i.hg)("tokenlist/setAccessToken",async e=>e),o=async(e,a,t)=>{try{let l=await d.post("user/login/",{walletAddress:e});l.data.accessToken&&(a(c(l.data.accessToken)),a(u(!0)),t())}catch(e){alert("The Login Credintial is not exact")}},u=(0,i.hg)("admin/setLoginStateAsync",async e=>e),h={loginState:!1,accessToken:({get(e){try{return localStorage.getItem(e)}catch(e){return null}},set(e,a){try{localStorage.setItem(e,a)}catch(e){}},remove(e){try{localStorage.removeItem(e)}catch(e){}}}).get("aToken")},m=(0,i.oM)({name:"auth",initialState:h,reducers:{},extraReducers:e=>{e.addCase(u.fulfilled,(e,a)=>{""!==a.payload&&(e.loginState=a.payload)}).addCase(c.fulfilled,(e,a)=>{""!==a.payload&&(e.accessToken=a.payload,localStorage.setItem("aToken",a.payload))})}}),x=e=>e.auth.loginState,f=e=>e.auth.accessToken;var g=m.reducer;function p(e){let{adminAddress:a,setAdminAddress:t}=e,i=async()=>{try{if(void 0!==window.ethereum){let e=await window.ethereum.request({method:"eth_requestAccounts"}),a=e[0];t(a)}else console.error("Please install MetaMask extension.")}catch(e){console.error(e)}},s=(0,n.I0)();return(0,r.useEffect)(()=>{a.startsWith("0x")&&o(a,s,()=>{})},[a]),(0,l.jsx)("div",{className:"fixed z-10 bg-white w-full h-20 flex justify-end shadow-md px-20",children:(0,l.jsx)("button",{className:" h-full hover:bg-gray-300 duration-300 cursor-pointer",onClick:i,children:""!==a?a:"Connect"})})}let v=(0,i.hg)("charecters/getAllData",async e=>e?(await s.Z.post("http://116.202.172.229:8443/api/v1/user/history/",{token:e})).data.data:[]),b=(0,i.hg)("charecters/getDataByWallet",async e=>{let{walletAddress:a,accessToken:t}=e;return a.startsWith("0x")?(await s.Z.post("http://116.202.172.229:8443/api/v1/user/history-by-wallet/",{walletAddress:a,accessToken:t})).data.data:[]}),y=(0,i.oM)({name:"character",initialState:{data:[],detail:[]},reducers:{},extraReducers:e=>{e.addCase(v.fulfilled,(e,a)=>{let t=[...a.payload];t=t.map((e,a)=>({id:a+1,...e})),e.data=t}).addCase(b.fulfilled,(e,a)=>{let t=[...a.payload];t=t.map((e,a)=>({id:a+1,...e})),e.detail=t})}});var w=y.reducer;let j=(0,i.xC)({reducer:{history:w,auth:g}});t(6501);var N=t(7357),A=t(821),S=t(3791),k=t(1133),C=e=>{let{walletAddress:a}=e,t=(0,n.I0)(),i=(0,n.v9)(f),s=(0,n.v9)(e=>e.history.detail);return(0,r.useEffect)(()=>{t(b({walletAddress:a,accessToken:i}))},[a]),(0,l.jsx)(N.Z,{children:(0,l.jsx)(A._$,{rows:s,columns:[{field:"id",headerName:"ID",flex:1,headerAlign:"center",align:"center"},{field:"Date",headerName:"Date",flex:2,editable:!0,headerAlign:"center",align:"center"},{field:"Time",headerName:"Time",flex:2,editable:!0,headerAlign:"center",align:"center"},{field:"ipAddress",headerName:"Ip Address",flex:3,editable:!0,headerAlign:"center",align:"center"},{field:"action_type",headerName:"Action Type",flex:3,editable:!0,headerAlign:"center",align:"center"},{field:"detail",headerName:"Detail Info",flex:5,editable:!0,headerAlign:"center",align:"center"}],initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0})})},_=()=>{let e=(0,n.I0)(),[a,t]=(0,r.useState)(!1),[i,s]=(0,r.useState)(""),d=(0,n.v9)(f),c=(0,n.v9)(e=>e.history.data),o=e=>{s(e),t(!0)};return(0,r.useEffect)(()=>{e(v(d))},[d]),(0,l.jsxs)("div",{className:"pt-24",children:[(0,l.jsx)(N.Z,{sx:{height:"70%",width:"80%",marginLeft:"auto",marginRight:"auto",overflowX:"hidden"},children:(0,l.jsx)(A._$,{rows:c,columns:[{field:"id",headerName:"ID",flex:1,headerAlign:"center",align:"center"},{field:"createdAt",headerName:"CreatedAt",flex:2,editable:!0,headerAlign:"center",align:"center"},{field:"updatedAt",headerName:"UpdatedAt",flex:2,editable:!0,headerAlign:"center",align:"center"},{field:"walletAddress",headerName:"Wallet Address",flex:2,editable:!0,headerAlign:"center",align:"center"},{field:"ipAddress",headerName:"IP Address",flex:2,editable:!0,headerAlign:"center",align:"center"},{field:"Siren",headerName:"Siren",type:"number",flex:2,editable:!0,headerAlign:"center",align:"center"},{field:"eggs",headerName:"Resource",type:"number",flex:1,editable:!0,headerAlign:"center",align:"center"},{field:"resource",headerName:"Water",type:"number",flex:1,editable:!0,headerAlign:"center",align:"center"},{field:"details",headerName:"details",description:"This column has a value getter and is not sortable.",sortable:!1,flex:1,headerAlign:"center",align:"center",renderCell:e=>(0,l.jsx)("strong",{className:"w-full h-full flex justify-center items-center text-center cursor-pointer hover:bg-gray-200 duration-300",onClick:()=>o(e.row.walletAddress),children:(0,l.jsx)(S.c,{})}),valueGetter:e=>"".concat(e.row.firstName||""," ").concat(e.row.lastName||"")}],initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[10,20,40],checkboxSelection:!0,disableRowSelectionOnClick:!0})}),(0,l.jsx)(k.Z,{open:a,onClose:()=>t(!1),children:(0,l.jsx)("div",{className:"w-4/5 bg-white mx-auto rounded-3xl px-20 py-16 mt-24 shadow-2xl  ",children:(0,l.jsx)(C,{walletAddress:i})})})]})},T=t(3442),D=t(586),I=t(720),M=t(8451);function z(){let e=[{value:"premium",label:"Premium"},{value:"Siren",label:"Siren"},{value:"eggs",label:"Resource"},{value:"resource",label:"Water"}],a=(0,n.I0)(),[t,i]=(0,r.useState)(e[0]),[d,c]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),x=(0,n.v9)(f);return(0,l.jsx)("div",{className:"w-4/5 mt-4 rounded-md border border-zinc-300 mx-auto mb-32",children:(0,l.jsxs)("div",{className:"flex justify-between px-10 py-10",children:[(0,l.jsxs)("div",{className:"w-2/5  ",children:[(0,l.jsx)("div",{className:"text-3xl py-2",children:"Update Users"}),(0,l.jsx)("div",{className:"text-md py-2",children:"Please update variables for following users"}),(0,l.jsx)("textarea",{className:"w-full border border-zinc-300 rounded-md h-64 mt-2 p-3",value:h,onChange:e=>m(e.target.value)})]}),(0,l.jsxs)("div",{className:"w-2/5 pt-10",children:[(0,l.jsx)("div",{className:"text-md py-2",children:"Objects"}),(0,l.jsx)(T.Z,{isClearable:!0,options:e,className:"py-2",value:t,onChange:e=>i(e)}),(0,l.jsx)("div",{className:"text-md py-2",children:"premium"===t.value?"Start Date":"Amount"}),"premium"===t.value?(0,l.jsx)(I._,{dateAdapter:D.y,children:(0,l.jsx)(M.M,{className:"w-full py-2",value:d,onChange:e=>{c(e.format("YYYY-MM-DD"))}})}):(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"number",className:"w-full border rounded-md border-zinc-300 py-2 outline-none px-2",value:o,onChange:e=>u(e.target.value)})}),(0,l.jsx)("button",{className:"w-full h-20 rounded-full bg-gray-500 my-5 text-3xl uppercase text-white hover:bg-gray-400 duration-500",onClick:()=>{let l="premium"===t.value?d:o;h&&t.value&&l&&s.Z.post("http://116.202.172.229:8443/api/v1/user/update",{object:t.value,value:l,wallets:h,token:x}).then(t=>{!0===t.data.data?(alert("success"),a(v(x))):alert("bad action"),m(""),i(e[0]),c("YYYY/MM/DD"),u("")})},children:"Send"})]})]})})}function Y(){let e=(0,n.v9)(x);return(0,l.jsx)("div",{children:e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_,{}),(0,l.jsx)(z,{})]}):(0,l.jsx)("div",{className:"w-full h-screen text-7xl uppercase flex justify-center items-center",children:"You Don't Have Permission"})})}function E(){let[e,a]=(0,r.useState)("");return(0,l.jsx)(n.zt,{store:j,children:(0,l.jsxs)("div",{children:[(0,l.jsx)(p,{adminAddress:e,setAdminAddress:a}),(0,l.jsx)(Y,{})]})})}},6501:function(){}},function(e){e.O(0,[774,436,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);